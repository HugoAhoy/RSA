#include "Int.hpp"
#include "string"
#include "gtest/gtest.h"

TEST(IntTest, BasicAssertions) {
  // Expect two strings to be equal.
  EXPECT_EQ("1233", Int("1233").val());
  EXPECT_EQ("2531564864864185005455884", Int("2531564864864185005455884").val());
  EXPECT_EQ("-1864868", Int("-1864868").val());
  EXPECT_EQ(std::to_string(519854864), Int(519854864).val());
  EXPECT_EQ(std::to_string(-346846), Int(-346846).val());
  EXPECT_EQ(std::to_string(78541274693145ll), Int(78541274693145ll).val());
  EXPECT_EQ(std::to_string(-21542365237ll), Int(-21542365237ll).val());
  EXPECT_EQ(std::to_string(288230376152127212ll), Int(288230376152127212ll).val());
  EXPECT_EQ(std::to_string(-562949945582896ll), Int(-562949945582896ll).val());
  EXPECT_EQ("567000485000000000012", Int(std::vector<long long>({12,485000, 567})).val());
  EXPECT_EQ("-468768056987452012468786", Int(std::vector<long long>({12468786,56987452, 468768}), false).val());
}

TEST(IntTest, Compares) {
  EXPECT_TRUE(Int(13146487) > Int(23687));
  EXPECT_TRUE(Int(-154867487) > Int(-876867417ll));
  EXPECT_TRUE(Int(78791231354ll) > Int(-1132));
  EXPECT_TRUE(Int("13146487") > Int(23687));
  EXPECT_TRUE(Int(-154867487) > Int("-876867417ll"));
  EXPECT_TRUE(Int("78791231354") > Int(-1132));
  EXPECT_TRUE(Int("1578213256713574867134153") > Int("1578213256713574867134152"));
  EXPECT_TRUE(Int("-938651534867485643544878789") > Int("-938651534867485643544878790"));

  EXPECT_FALSE(Int(-3501534534ll) > Int(-45348786));
  EXPECT_FALSE(Int(-1534854) > Int(641487));
  EXPECT_FALSE(Int(54867487) > Int(54867488));
  EXPECT_FALSE(Int(288230376152127212ll) > Int(288230376152127212ll));
  EXPECT_FALSE(Int("2531564864864185005455884") > Int("2531564864864185005455898"));
  EXPECT_FALSE(Int("-65318711054603465474879") > Int("-65318711054603465474878"));
  EXPECT_FALSE(Int(-562949945582896ll) > Int("-562949945582896"));

  EXPECT_TRUE(Int("153415364") < Int("253415389"));
  EXPECT_TRUE(Int(21456486) < Int("98654860"));
  EXPECT_TRUE(Int("-1354545") < Int(2152345646ll));
  EXPECT_TRUE(Int(-3524564) < Int("-534"));
  EXPECT_TRUE(Int("-15486541315348674685156") < Int("-15486541315348674685155"));
  EXPECT_TRUE(Int("74354634645312134563463") < Int("74364634645312134563463"));

  EXPECT_FALSE(Int(26433543) < Int(415348));
  EXPECT_FALSE(Int("22") < Int(22));
  EXPECT_FALSE(Int("-15634654151") < Int(-1354856005244534));
  EXPECT_FALSE(Int("-32135748653546846873578") < Int("-32135748653546846873590"));
  EXPECT_FALSE(Int("2346871145741357877931476") < Int("2346871135741357877931476"));
  EXPECT_FALSE(Int(98713) < Int(-1534867687ll));

  EXPECT_TRUE(Int(1534534654313ll) >= Int("1534534654313"));
  EXPECT_TRUE(Int("176346879687896513513435") >= Int("176346879687896513512435"));
  EXPECT_TRUE(Int(5856786786) >= Int(-14534));
  EXPECT_TRUE(Int("24435435746") >= Int(24435435746ll));
  EXPECT_TRUE(Int(-1354524) >= Int(-1354524ll));

  EXPECT_FALSE(Int(-333543) >= Int(221324));
  EXPECT_FALSE(Int("-357467") >= Int(-2434));
  EXPECT_FALSE(Int(1543574387ll) >= Int("56374686135437"));
  EXPECT_FALSE(Int("5467867131323233786789") >= Int("6467867131323233786800"));
  EXPECT_FALSE(Int(338789) >= Int(323416874687ll));

  EXPECT_TRUE(Int(23135465786ll) <= Int("23135465786"));
  EXPECT_TRUE(Int(3333) <= Int(1324687));
  EXPECT_TRUE(Int(-1122768) <= Int(123468));
  EXPECT_TRUE(Int(-1354567) <= Int(-33546));
  EXPECT_TRUE(Int("113546876878979878915245346") <= Int("113546876878979878915245357"));
  EXPECT_TRUE(Int(5789723) <= Int("154685741648967897979"));

  EXPECT_FALSE(Int(204899798) <= Int(20489979ll));
  EXPECT_FALSE(Int(541684687) <= Int(-45768152343ll));
  EXPECT_FALSE(Int(123348) <= Int("56"));
  EXPECT_FALSE(Int("1523746873213453786786") <= Int("1523746873213453786500"));
  EXPECT_FALSE(Int(-135454864) <= Int("-1534302153453465341213"));

  EXPECT_TRUE(Int(-2646456315341563ll) == Int("-2646456315341563"));
  EXPECT_TRUE(Int(5486) == Int(5486ll));
  EXPECT_TRUE(Int("15484684") == Int(15484684));
  EXPECT_TRUE(Int("4867867135135") == Int(4867867135135ll));
  EXPECT_TRUE(Int(-234864) == Int(-234864ll));

  EXPECT_FALSE(Int(13521564) == Int("13521565"));
  EXPECT_FALSE(Int(5648915874767ll) == Int(-5648915874767ll));
  EXPECT_FALSE(Int("9687864") == Int("96878642"));
}

TEST(IntTest, PureAdd){
  EXPECT_EQ(Int("56470155929547727665"), Int("6031064866078989")+Int("56464124864681648676"));
  EXPECT_EQ(Int("48486791280182835111601515536598362"), Int("48486786748648648646486168786799879")+Int("4531534186465115346749798483"));
  EXPECT_EQ(Int("13839538141332454578901513446"), Int("8974891654534789789165346489")+Int("4864646486797664789736166957"));
  EXPECT_EQ(Int("21414457520061387299705451081353"), Int("7898989165413512316548966188167")+Int("13515468354647874983156484893186"));
  EXPECT_EQ(Int("16051821949544895927452114416106932955126"), Int("8549346125469871348654237895654207709524")+Int("7502475824075024578797876520452725245602"));
}

TEST(IntTest, PureOpposite){
  EXPECT_EQ(Int("-16546461864868"), -Int("16546461864868"));
  EXPECT_EQ(Int("-848895303154165468541648648676835153"), -Int("848895303154165468541648648676835153"));
}

TEST(IntTest, PureMul){
  EXPECT_EQ(Int("22091992491278793080119962576188442980617786044986607816"), Int("135186486515341864183486468486")*Int("163418645315348486541534156"));
  EXPECT_EQ(Int("2430708925263225659557520739424509020697603487605819976135717630540697024207610096000013311438233490"), Int("66829901445094962972526687443984278440454531409885")*Int("36371577283563831933213310728072789233591584505274"));
  EXPECT_EQ(Int("5724970101368984200390318643193793925601371376763745611016435749956244696579424179753099951597374420"), Int("82763762636058345954758368032045264835614730049361")*Int("69172424247357031063131034979272708181869710115220"));
  EXPECT_EQ(Int("9092596509198625264319710961617066349774856649971433657528864626289953791602638447622330420850767696"), Int("92761091810648429802612680779913776446827166536854")*Int("98021663304256714920306683754226327445910428600824"));
  EXPECT_EQ(Int("3525628334264492990221206014386491800076742116223078482548194143324484331403543204728478996389808574"), Int("36476219575250258309111485445883779268164361688249")*Int("96655529967713331507578840606621860670381416010926"));
  EXPECT_EQ(Int("1558842831198336287103196658000496796189942133638031303023787109614380732222819243098912788679916584"), Int("86883702545482340425897882495958845791363011371896")*Int("17941717324745742642745697452527038142264925058379"));
  EXPECT_EQ(Int("2859594821081656190515529514795498146555900546092570432292095983082492415608060476657210491924041584"), Int("60842259942222605262375200466609737913510293405688")*Int("47000141411532081707250924438998046122774448678418"));
  EXPECT_EQ(Int("-5570948046304130057978316295407404454192540818819247430597759019515804115418034534824584278878892865948337520217838478702639325328212070200"), Int("2513618415104452097825669676233731056134153453416733743321655019388360")*Int("-2216306187457905072387181010979521834466379898107950425932223598081695"));
  EXPECT_EQ(Int("56489238397231155371382255959378873997333339044207564987973053334471412592842500367662734733087818576942394910735517775938591349921905362783"), Int("-7326929864413112994950556526414081222270104575911372984585086370160087")*Int("-7709810171870116948724313186803069360827155235799352175726650708206009"));
  EXPECT_EQ(Int("-80147543885918453645232712265166195508737729040057997045707404622504716730241745770050344630807938506552480011176773547405796098627808607560"), Int("-8096399447627553371722231419267086629636573351303605905919913605055480")*Int("9899158805634729345826311545591461007007096844748031801696269620825047"));
  EXPECT_EQ(Int("41674835261566760609249859984105047100717245156199937925657470526143310024884598103829533424191530656185326296408042778029383668236205815905"), Int("-6806627734761339463572857023133841679338235511244446535041066271063695")*Int("-6122684666407425294004109224870672985571026808683556345103732573131279"));
  EXPECT_EQ(Int("-4818809129023600410700465050588999979763753043757981302056701726712078505885181613432144402187870464761540274879673891623671957170403706832"), Int("812475718942744934174565951568948200939647706296165689022011009817136")*Int("-5931019249774258556344877907942745512422190576624724315586143968181087"));
}
